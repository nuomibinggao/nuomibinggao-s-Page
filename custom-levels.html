<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ADOFAI Custom Levels</title>
  <link href="https://fonts.googleapis.com/css2?family=Chillax:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="custom-levels.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ADOFAI Custom Levels</h1>
    </header>

    <div class="back-button">
      <a href="projecthub.html">← Back to Hub</a>
    </div>

    <div class="additional-buttons">
      <a href="plcr-levels.html">To Team Polychrome Levels Page</a>
    </div>

    <div class="search-bar">
      <input type="text" id="levelSearch" placeholder="Search levels..." />
    </div>

    <div class="sort-bar">
      <span>Filter By</span>
      <select id="sortOptions">
        <option value="date-desc" selected>Date (Newest First)</option>
        <option value="date-asc">Date (Oldest First)</option>
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
      </select>
    </div>

    <main class="list-view" id="levelsList">
      <a href="https://tuforums.com/levels/10431" target="_blank" class="level-card-link">
        <div class="level-card" data-date="2025-09-08">
          <div class="level-info">
            <img src="https://api.tuforums.com/v2/media/image/icon/Unranked.png" alt="Level Icon" class="level-icon">
            Ludicin - Echoes of Memoria
          </div>
          <div class="level-meta">Duration: 6:41 | Released: 2025-09-08</div>
        </div>
      </a>
      <a href="https://tuforums.com/levels/10143" target="_blank" class="level-card-link">
        <div class="level-card" data-date="2025-08-25">
          <div class="level-info">
            <img src="https://api.tuforums.com/v2/media/image/icon/G1.png" alt="Level Icon" class="level-icon">
            log() - SELF
          </div>
          <div class="level-meta">Duration: 3:11 | Released: 2025-08-25</div>
        </div>
      </a>
      <a href="https://tuforums.com/levels/9729" target="_blank" class="level-card-link">
        <div class="level-card" data-date="2025-08-01">
          <div class="level-info">
            <div class="icon-container">
              <img src="https://api.tuforums.com/v2/media/image/icon/Q3.png" alt="Level Icon" class="level-icon">
              <img src="https://api.tuforums.com/v2/media/image/icon/U14J.png" alt="Secondary Icon" class="level-icon-secondary">
            </div>
            trung-nova - REFLECTION»«REFRACTION
          </div>
          <div class="level-meta">Duration: 3:07 | Released: 2025-08-01</div>
        </div>
      </a>
      <a href="https://tuforums.com/levels/9728" target="_blank" class="level-card-link">
        <div class="level-card" data-date="2025-08-01">
          <div class="level-info">
            <div class="icon-container">
              <img src="https://api.tuforums.com/v2/media/image/icon/Q2.png" alt="Level Icon" class="level-icon">
              <img src="https://api.tuforums.com/v2/media/image/icon/U12.png" alt="Secondary Icon" class="level-icon-secondary">
            </div>
            trung-nova - REFLECTION»«REFRACTION (100% Judgment)
          </div>
          <div class="level-meta">Duration: 3:07 | Released: 2025-08-01</div>
        </div>
      </a>
      <a href="https://www.123865.com/s/HUz5jv-wxY93" target="_blank" class="level-card-link">
        <div class="level-card legacy-level" data-date="2025-07-07">
          <div class="level-info">Legacy Levels</div>
          <div class="level-meta">Latest Release: 2025-07-07 | Difficulty Varies From G2 - U6</div>
        </div>
      </a>
    </main>

    <footer>
      © 2025 <span id="footerName">nuomibinggao</span>. This website is licensed under the MIT License.
      <div class="footer-note">This page is partially generated using ChatGPT & Lingma AI</div>
    </footer>
  </div>

  <script>
    // Check if today is December 17th (UTC+8)
    function isBirthday() {
      // Get current date in UTC+8
      const now = new Date();
      const utc8Date = new Date(now.getTime() + (8 * 60 * 60 * 1000));
      
      // Check if month is December (12) and date is 17
      return utc8Date.getUTCMonth() === 12 && utc8Date.getUTCDate() === 17;
    }

    // Add birthday hat if it's the birthday
    function addBirthdayHat() {
      if (isBirthday()) {
        // Add birthday hat to footer name
        const footerName = document.getElementById('footerName');
        if (footerName) {
          footerName.innerHTML = '<img src="bdayhat.png" alt="Birthday Hat" style="width: 15px; height: auto; vertical-align: middle; margin-right: 3px;">' + footerName.innerHTML;
        }
      }
    }

    // Run on page load
    document.addEventListener('DOMContentLoaded', addBirthdayHat);

    const sortSelect = document.getElementById('sortOptions');
    const darkModeToggle = document.getElementById('darkModeToggle');
    const levelsList = document.getElementById('levelsList');
    const levelSearch = document.getElementById('levelSearch');

    // Apply default sorting by date (newest first) on page load
    document.addEventListener('DOMContentLoaded', () => {
      sortSelect.dispatchEvent(new Event('change'));
    });

    sortSelect.addEventListener('change', () => {
      const option = sortSelect.value;
      // Sort anchor elements (the direct children of levelsList)
      const anchors = Array.from(levelsList.querySelectorAll(':scope > a'));

      function getLevelName(anchor) {
        const card = anchor.querySelector('.level-card');
        if (!card) return '';
        const info = card.querySelector('.level-info');
        if (!info) return '';
        // Remove extra whitespace and normalize
        return info.textContent.trim().replace(/\s+/g, ' ').toLowerCase();
      }

      anchors.sort((a, b) => {
        const aCard = a.querySelector('.level-card');
        const bCard = b.querySelector('.level-card');
        const aDate = aCard ? aCard.getAttribute('data-date') : '';
        const bDate = bCard ? bCard.getAttribute('data-date') : '';
        const aName = getLevelName(a);
        const bName = getLevelName(b);

        if (option === 'name-asc') {
          // A-Z
          return aName.localeCompare(bName, undefined, { sensitivity: 'base' });
        } else if (option === 'name-desc') {
          // Z-A
          return bName.localeCompare(aName, undefined, { sensitivity: 'base' });
        } else if (option === 'date-asc') {
          return aDate.localeCompare(bDate);
        } else if (option === 'date-desc') {
          return bDate.localeCompare(aDate);
        }
        return 0;
      });

      anchors.forEach(anchor => levelsList.appendChild(anchor));
    });

    levelSearch.addEventListener('input', () => {
      const query = levelSearch.value.toLowerCase();
      Array.from(levelsList.children).forEach(level => {
        const title = level.querySelector('.level-info').textContent.toLowerCase();
        level.style.display = title.includes(query) ? 'block' : 'none';
      });
    });
  </script>
</body>
</html>